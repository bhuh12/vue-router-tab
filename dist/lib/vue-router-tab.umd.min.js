(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-router-tab"]=e(require("vue")):t["vue-router-tab"]=e(t["Vue"])})("undefined"!==typeof self?self:this,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"02eb":function(t,e,n){},"4ba7":function(t,e,n){"use strict";var r=n("02eb"),i=n.n(r);i.a},"8bbf":function(e,n){e.exports=t},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),o=new L(r||[]);return a._invoke=_(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",f="executing",d="completed",v={};function p(){}function m(){}function g(){}var b={};b[a]=function(){return this};var y=Object.getPrototypeOf,x=y&&y(y(I([])));x&&x!==n&&r.call(x,a)&&(b=x);var w=g.prototype=p.prototype=Object.create(b);function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function P(t){function e(n,i,a,o){var s=c(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,o)})}o(s.arg)}var n;function i(t,r){function i(){return new Promise(function(n,i){e(t,r,n,i)})}return n=n?n.then(i,i):i()}this._invoke=i}function _(t,e,n){var r=l;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return R()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=$(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}function $(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,$(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function I(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:e,done:!0}}return m.prototype=w.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},T(P.prototype),P.prototype[o]=function(){return this},t.AsyncIterator=P,t.async=function(e,n,r,i){var a=new P(u(e,n,r,i));return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},T(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},a34a:function(t,e,n){t.exports=n("96cf")},e42d:function(t,e,n){"use strict";var r=n("f42e"),i=n.n(r);i.a},f42e:function(t,e,n){},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fb15:function(t,e,n){"use strict";var r;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"router-tab"},[n("header",{staticClass:"router-tab-header"},[n("div",{staticClass:"router-tab-scroll"},[n("transition-group",t._b({staticClass:"router-tab-nav",attrs:{tag:"ul"},on:{"after-enter":t.onTabTransitionEnd,"after-leave":t.onTabTransitionEnd}},"transition-group","string"===typeof t.tabTransition?{name:t.tabTransition}:t.tabTransition,!1),t._l(t.items,function(e,r){var i=e.id,a=e.to,o=e.title,s=e.icon,u=e.tips,c=e.closable;return n("router-link",{key:i||a,staticClass:"router-tab-item",class:{actived:t.activedTab===i,contextmenu:t.contextmenu.id===i},attrs:{tag:"li",title:t.i18nText(u||o)||t.lang.tab.untitled,to:a},nativeOn:{contextmenu:function(e){return e.preventDefault(),function(e){return t.showContextmenu(i,r,e)}(e)}}},[t._t("default",[s?n("i",{staticClass:"tab-icon",class:s}):t._e(),n("span",{staticClass:"tab-title"},[t._v(t._s(t.i18nText(o)||t.lang.tab.untitled))]),!1===c||t.keepLastTab&&t.items.length<2?t._e():n("i",{staticClass:"tab-close",attrs:{title:t.lang.contextmenu.close},on:{click:function(e){return e.preventDefault(),t.closeTab(i)}}})],null,{tab:t.items[r],tabs:t.items,index:r})],2)}),1)],1),n("a",{staticClass:"nav-prev",on:{click:function(e){return t.tabScroll("left")}}}),n("a",{staticClass:"nav-next",on:{click:function(e){return t.tabScroll("right")}}})]),n("div",{staticClass:"router-tab-container",class:{loading:t.loading}},[n("router-alive",{ref:"routerAlive",attrs:{"alive-id":t.aliveId},on:{update:t.updateTab}},[n("transition",t._b({attrs:{appear:""},on:{"after-enter":t.onPageTransitionEnd,"after-leave":t.onPageTransitionEnd}},"transition","string"===typeof t.pageTransition?{name:t.pageTransition}:t.pageTransition,!1),[t.isViewAlive?n("router-view",t._b({ref:"routerView",staticClass:"router-tab-page"},"router-view",t.routerView,!1)):t._e()],1)],1),n("transition-group",t._b({staticClass:"router-tab-iframes",attrs:{tag:"div"}},"transition-group","string"===typeof t.pageTransition?{name:t.pageTransition}:t.pageTransition,!1),t._l(t.iframes,function(e){return n("iframe",{directives:[{name:"show",rawName:"v-show",value:e===t.currentIframe,expression:"url === currentIframe"}],key:e,staticClass:"router-tab-iframe",attrs:{src:e,name:t.iframeNamePrefix+e,frameborder:"0"},on:{load:function(n){return t.iframeLoaded(e)}}})}),0)],1),n("transition",{attrs:{name:"router-tab-zoom"}},[t.contextmenu.id?n("div",{staticClass:"router-tab-contextmenu",style:"left: "+t.contextmenu.left+"px; top: "+t.contextmenu.top+"px;"},[n("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.isContextTabActived},on:{click:function(e){t.isContextTabActived&&t.refreshTab(t.contextmenu.id)}}},[t._v("\n        "+t._s(t.lang.contextmenu.refresh)+"\n      ")]),n("a",{staticClass:"contextmenu-item",attrs:{disabled:t.items.length<2},on:{click:function(e){t.items.length>1&&t.refreshAll()}}},[t._v("\n        "+t._s(t.lang.contextmenu.refreshAll)+"\n      ")]),n("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.isContextTabCanBeClosed},on:{click:function(e){t.isContextTabCanBeClosed&&t.closeTab(t.contextmenu.id)}}},[t._v("\n        "+t._s(t.lang.contextmenu.close)+"\n      ")]),n("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.tabsLeft.length},on:{click:function(e){t.tabsLeft.length&&t.closeMulti(t.tabsLeft)}}},[t._v("\n        "+t._s(t.lang.contextmenu.closeLefts)+"\n      ")]),n("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.tabsRight.length},on:{click:function(e){t.tabsRight.length&&t.closeMulti(t.tabsRight)}}},[t._v("\n        "+t._s(t.lang.contextmenu.closeRights)+"\n      ")]),n("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.tabsOther.length},on:{click:function(e){t.tabsOther.length&&t.closeMulti(t.tabsOther)}}},[t._v("\n        "+t._s(t.lang.contextmenu.closeOthers)+"\n      ")])]):t._e()])],1)},a=[],o=n("a34a"),s=n.n(o),u=n("8bbf"),c=n.n(u),l=Object.create(null),h=[];function f(t){return void 0!==t&&null!==t}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){t.call(r,i)},e)}}var v="[Vue Router Tab]";function p(t,e){t||"undefined"!==typeof console&&console.warn("".concat(v," ").concat(e))}var m={renamed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"方法";return"该".concat(e,"已更名为“").concat(t,"”，请修改后使用")}};function g(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){g(a,r,i,o,s,"next",t)}function s(t){g(a,r,i,o,s,"throw",t)}o(void 0)})}}var y={data:function(){return{contextmenu:{id:null,index:-1,left:0,top:0}}},computed:{isContextTabActived:function(){return this.contextmenu.id===this.activedTab},isContextTabCanBeClosed:function(){var t=this.items,e=this.contextmenu,n=t[e.index];return t.length>1&&n&&!1!==n.closable},tabsLeft:function(){var t=this.items,e=this.contextmenu,n=e.id,r=e.index;return n?t.slice(0,r).filter(function(t){var e=t.closable;return!1!==e}):h},tabsRight:function(){var t=this.items,e=this.contextmenu,n=e.id,r=e.index;return n?t.slice(r+1).filter(function(t){var e=t.closable;return!1!==e}):h},tabsOther:function(){var t=this.items,e=this.contextmenu.id;return e?t.filter(function(t){var n=t.closable,r=t.id;return!1!==n&&e!==r}):h}},watch:{$route:function(t){this.hideContextmenu()},"contextmenu.id":function(t,e){var n=this;!e&&t?document.addEventListener("click",this.onClick=function(t){t.target!==n.$el.querySelector(".router-tab-contextmenu")&&n.hideContextmenu()}):e&&!t&&document.removeEventListener("click",this.onClick)}},methods:{showContextmenu:function(t,e,n){var r=n||l,i=r.clientY,a=r.clientX;Object.assign(this.contextmenu,{id:t,index:e,top:i,left:a})},hideContextmenu:function(){this.showContextmenu(null,-1)},closeMulti:function(){var t=b(s.a.mark(function t(e){var n,r,i,a,o,u,c,l,h,f,d=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=this.items,r=this.$router,i=this.contextmenu,a=n.find(function(t){var e=t.id;return e===i.id}),o=!0,u=!1,c=void 0,t.prev=5,l=e[Symbol.iterator]();case 7:if(o=(h=l.next()).done){t.next=19;break}return f=h.value.id,t.prev=9,t.next=12,this.removeTab(f);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](9);case 16:o=!0,t.next=7;break;case 19:t.next=25;break;case 21:t.prev=21,t.t1=t["catch"](5),u=!0,c=t.t1;case 25:t.prev=25,t.prev=26,o||null==l.return||l.return();case 28:if(t.prev=28,!u){t.next=31;break}throw c;case 31:return t.finish(28);case 32:return t.finish(25);case 33:-1===n.findIndex(function(t){var e=t.id;return e===d.activedTab})&&r.replace(a.to);case 34:case"end":return t.stop()}},t,this,[[5,21,25,33],[9,14],[26,,28,32]])}));function e(e){return t.apply(this,arguments)}return e}()}},x={tab:{untitled:"无标题"},contextmenu:{refresh:"刷新",refreshAll:"刷新所有",close:"关闭",closeLefts:"关闭左侧",closeRights:"关闭右侧",closeOthers:"关闭其他"},msg:{keepLastTab:"至少应保留1个页签",i18nProp:"请提供“i18n”方法以处理国际化内容"}},w={tab:{untitled:"Untitled"},contextmenu:{refresh:"Refresh",refreshAll:"Refresh All",close:"Close",closeLefts:"Close to the Left",closeRights:"Close to the Right",closeOthers:"Close Others"},msg:{keepLastTab:"Keep at least 1 tab",i18nProp:'Method "i18n" is not defined on the instance'}},T={"zh-CN":x,en:w};function P(t){return C(t)||$(t)||_()}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function $(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function C(t){if(Array.isArray(t))return t}var k={props:{language:{type:[String,Object],default:"zh-CN"},i18n:Function},computed:{lang:function(){var t=this.language;return"string"===typeof t&&(t=T[t]),t||(t=T["en"]),t}},methods:{i18nText:function(t){var e=this.i18nParse(t),n=e.key,r=e.params;if(n){var i="function"===typeof this.i18n;if(this._hasI18nPropWarn||(p(i,this.lang.msg.i18nProp),this._hasI18nPropWarn=!0),i)return this.i18n(n,r)}return t},i18nParse:function(t){var e,n;if("string"===typeof t){var r=/^i18n:([^\s]+)$/.exec(t);r&&(e=r[1],n=[])}else if(Array.isArray(t)){var i=P(t);e=i[0],n=i.slice(1)}return{key:e,params:n}}}},L={data:function(){return{iframes:[],currentIframe:null,iframeNamePrefix:"RouterTabIframe-"}},methods:{getIframePath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="".concat(this.getBasePath(),"/iframe/").concat(encodeURIComponent(t));return e&&(r+="/"+e,n&&(r+="/"+n)),r},openIframe:function(t,e,n){var r=this.getIframePath(t,e,n);this.$router.push(r)},closeIframe:function(t){var e=this.getIframePath(t);this.close(e,!1)},refreshIframe:function(t){var e=this.getIframePath(t);this.refresh(e,!1)},openIframeTab:function(){this.openIframe.apply(this,arguments),p(!1,m.renamed("openIframe"))},closeIframeTab:function(){this.closeIframe.apply(this,arguments),p(!1,m.renamed("closeIframe"))},refreshIframeTab:function(){this.refreshIframe.apply(this,arguments),p(!1,m.renamed("refreshIframe"))},getIframeEl:function(t){var e=this.iframeNamePrefix+t;return document.getElementsByName(e)[0]},iframeMounted:function(t){var e=this.getIframeEl(t);this.$emit("iframe-mounted",t,e)},iframeLoaded:function(t){var e=this.getIframeEl(t);this.$emit("iframe-loaded",t,e)}}},I={created:function(){this.$router.beforeEach(this.routerPageLeaveGuard)},methods:{routerPageLeaveGuard:function(t,e,n){if(this._isDestroyed){var r=this.$router.beforeHooks,i=r.indexOf(this.routerPageLeaveGuard);i>-1&&r.splice(i,1),n()}else{var a=this.getAliveId(t),o=this.$alive,s=o&&o.cache[a]||l,u=s.route;u&&!this.isAlikeRoute(t,u)?this.pageLeavePromise(a,"replace").then(function(){return n()}).catch(function(){return n(!1)}):n()}},pageLeavePromise:function(t,e){var n=this;return new Promise(function(r,i){var a=n.items.find(function(e){return e.id===t}),o=n.$alive.cache[t]||l,s=o.vm,u=s&&s.$vnode.componentOptions.Ctor.options.beforePageLeave;"function"===typeof u?u.bind(s)(r,i,a,e):r()})}}},R={methods:{matchRoutes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=t.matched,n=e.findIndex(function(t){var e=t.instances;return!e.default||Object.values(e).find(function(t){return t&&t._isRouterPage})});return p(n>-1,"未能匹配到路由信息"),{baseRoute:e[n-1],pageRoute:e[n],pageRouteIdx:n,isNest:n!==e.length-1}},parsePath:function(t,e){for(var n in e)t=t.replace(":"+n,e[n]);return t},getCtorIdByNode:function(t){var e=t.componentOptions;return e?e.Ctor.cid:null},getBasePath:function(){var t=this.matchRoutes().baseRoute.path,e=this.$route.params;return this.parsePath(t,e)},getPagePath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t),n=e.pageRoute,r=e.isNest;if(r)return this.parsePath(n.path,t.params)},getPageComp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=this.matchRoutes(t),n=e.pageRoute;return n?n.components.default:null},getPathWithoutHash:function(t){return t.hash?t.fullPath.replace(t.hash,""):t.fullPath},isAlikeRoute:function(t,e){var n=this.getPagePath(t),r=this.getPagePath(e);return this.getPathWithoutHash(t)===this.getPathWithoutHash(e)||n&&r&&n===r},isNestRoute:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t);return e.isNest}}},O={path:function(t,e){return e||t.path},fullpath:function(t,e){return e||t.fullPath.replace(t.hash,"")}},A={props:{aliveId:{type:[String,Function],default:"path"}},mixins:[R],methods:{getAliveId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t),n=t.meta&&t.meta.aliveId||this.aliveId;return"string"===typeof n&&(n=O[n.toLowerCase()]),"function"!==typeof n&&(n=O.path),n.bind(this)(t,this.getPagePath(t,e))}}};function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.scrollTo?t.scrollTo({left:e,top:n,behavior:"smooth"}):(t.scrollLeft=e,t.scrollTop=n)}function j(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(f(n)&&(f(n.componentOptions)||S(n)))return n}}function S(t){return t.isComment&&t.asyncFactory}function N(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function V(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){N(a,r,i,o,s,"next",t)}function s(t){N(a,r,i,o,s,"throw",t)}o(void 0)})}}var B={watch:{activedTab:function(){var t=V(s.a.mark(function t(){var e,n,r,i;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$el){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$nextTick();case 4:e=this.$el.querySelector(".router-tab-nav .actived"),n=this.$el.querySelector(".router-tab-scroll"),e&&(r=e.offsetLeft,i=n.scrollLeft,(r<i||r+e.clientWidth>i+n.clientWidth)&&this.adjust());case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.$nextTick(this.adjust)},mounted:function(){window.addEventListener("resize",this.onResize=d(this.adjust))},destroyed:function(){window.removeEventListener("resize",this.onResize)},methods:{tabScroll:function(t){var e=this.$el.querySelector(".router-tab-header"),n=e.querySelector(".router-tab-scroll"),r=e.clientWidth-110;E(n,n.scrollLeft+("left"===t?-r:r))},adjust:function(){if(this.$el){var t=this.$el.querySelector(".router-tab-header"),e=t.querySelector(".router-tab-scroll"),n=e.querySelector(".router-tab-nav"),r=n.querySelector(".actived"),i=n.clientWidth>e.clientWidth;t.classList[i?"add":"remove"]("is-scroll"),r&&i&&E(e,r.offsetLeft+(r.clientWidth-e.clientWidth)/2)}}}};function M(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function q(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){M(a,r,i,o,s,"next",t)}function s(t){M(a,r,i,o,s,"throw",t)}o(void 0)})}}var F={name:"RouterTab",mixins:[y,k,L,I,A,B],props:{tabs:{type:Array,default:function(){return[]}},keepLastTab:{type:Boolean,default:!0},defaultPage:[String,Object],routerView:Object,tabTransition:{type:[String,Object],default:"router-tab-zoom"},pageTransition:{type:[String,Object],default:function(){return{name:"router-tab-swap",mode:"out-in"}}}},data:function(){return{loading:!1,items:[],activedTab:null,isViewAlive:!0,isMounted:!1}},computed:{defaultPath:function(){return this.defaultPage||this.getBasePath()},$alive:function(){return this.isMounted?this.$refs.routerAlive:null}},watch:{$route:function(t){this.loading=!1,this.updateActivedTab(),this.fixCommentPage()}},created:function(){c.a.prototype.$routerTab=this,this.initTabs(),this.updateActivedTab()},mounted:function(){this.isMounted=!0},destroyed:function(){c.a.prototype.$routerTab===this&&(c.a.prototype.$routerTab=null)},methods:{initTabs:function(){var t=this,e=this.tabs,n=this.$router,r={};this.items=e.map(function(e,i){var a="string"===typeof e?{to:e}:e||l,o=a.to,s=a.closable,u=a.title,c=a.tips,h=o&&n.match(o);if(h){var f=t.getRouteTab(h),d=f.id;if(!r[d])return u&&(f.title=u),c&&(f.tips=c),f.closable=!1!==s,r[d]=f}}).filter(function(t){return!!t})},updateActivedTab:function(){this.activedTab=this.getAliveId()},updateTab:function(t,e){var n=e.route,r=e.tab,i=this.items,a=i.findIndex(function(e){var n=e.id;return n===t}),o=Object.assign(this.getRouteTab(n),r);if(a>-1){var s=i[a];o.closable=!1!==s.closable,this.$set(i,a,o)}else i.push(o)},getIdByLocation:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=this.$router.match(t,this.$router.currentRoute);if(!e)return this.getAliveId(n);var r=this.getPathWithoutHash(n),i=this.items.find(function(t){var e=t.to;return e.split("#")[0]===r});return i?i.id:void 0}},getRouteTab:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t),n=this.getAliveId(t),r=e.pageRoute.meta,i=r.title,a=r.icon,o=r.tips;return{id:n,to:t.fullPath,title:i,icon:a,tips:o}},removeTab:function(){var t=q(s.a.mark(function t(e){var n,r,i,a=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],r=this.items,i=r.findIndex(function(t){return t.id===e}),n||!this.keepLastTab||1!==r.length){t.next=5;break}throw new Error(this.lang.msg.keepLastTab);case 5:if(n){t.next=8;break}return t.next=8,this.pageLeavePromise(e,"close");case 8:this.$alive.remove(e),i>-1&&r.splice(i,1);case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),close:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("boolean"===typeof e&&(r=void 0===n||!!n,n=e,e=void 0),t){var i=this.getIdByLocation(t,n);i&&this.closeTab(i,e,r)}else this.closeTab(void 0,e,r)},closeTab:function(){var t=q(s.a.mark(function t(){var e,n,r,i,a,o,u,c,l,h=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:this.activedTab,n=h.length>1?h[1]:void 0,r=h.length>2&&void 0!==h[2]&&h[2],i=this.activedTab,a=this.items,o=this.$router,u=a.findIndex(function(t){return t.id===e}),t.prev=5,t.next=8,this.removeTab(e,r);case 8:if(null!==n){t.next=10;break}return t.abrupt("return");case 10:n||i!==e||(c=a[u]||a[u-1],n=c?c.to:this.defaultPath),n&&(l=o.match(n),l.fullPath===this.$route.fullPath?this.refreshTab():o.replace(n)),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),p(!1,t.t0);case 17:case"end":return t.stop()}},t,this,[[5,14]])}));function e(){return t.apply(this,arguments)}return e}(),refresh:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var r=this.getIdByLocation(t,e);r&&this.refreshTab(r,n)}else this.refreshTab(void 0,n)},refreshTab:function(){var t=q(s.a.mark(function t(){var e,n,r=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:this.activedTab,n=r.length>1&&void 0!==r[1]&&r[1],t.prev=2,n){t.next=6;break}return t.next=6,this.pageLeavePromise(e,"refresh");case 6:this.$alive.remove(e),e===this.activedTab&&this.reloadView(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),p(!1,t.t0);case 13:case"end":return t.stop()}},t,this,[[2,10]])}));function e(){return t.apply(this,arguments)}return e}(),refreshAll:function(){var t=q(s.a.mark(function t(){var e,n,r,i=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=i.length>0&&void 0!==i[0]&&i[0],n=this.$alive.cache,t.t0=s.a.keys(n);case 3:if((t.t1=t.t0()).done){t.next=16;break}if(r=t.t1.value,t.prev=5,e){t.next=9;break}return t.next=9,this.pageLeavePromise(r,"refresh");case 9:this.$alive.remove(r),t.next=14;break;case 12:t.prev=12,t.t2=t["catch"](5);case 14:t.next=3;break;case 16:this.reloadView();case 17:case"end":return t.stop()}},t,this,[[5,12]])}));function e(){return t.apply(this,arguments)}return e}(),reset:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultPath;this.items.forEach(function(e){var n=e.id;return t.$alive.remove(n)}),this.initTabs();var n=this.$router.match(e);n.fullPath===this.$route.fullPath?this.refreshTab():this.$router.replace(e)},reloadView:function(){var t=q(s.a.mark(function t(){var e,n=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],this.isViewAlive=!1,!e){t.next=6;break}return t.next=5,this.$nextTick();case 5:this.isViewAlive=!0;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onTabTransitionEnd:function(){this.adjust()},onPageTransitionEnd:function(){this.isViewAlive||(this.isViewAlive=!0)},fixCommentPage:function(){8===this.$alive.$el.nodeType&&this.reloadView(!0)}}},W=F;n("e42d"),n("4ba7");function G(t,e,n,r,i,a,o,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}var z=G(W,i,a,!1,null,null,null),H=z.exports,D={name:"RouterAlive",mixins:[A],created:function(){Object.assign(this,{cache:Object.create(null),lastRoute:this.$route})},destroyed:function(){this.removeAll(),this.cache=null,this.lastRoute=null},render:function(){var t=this.$slots.default,e=j(t),n=e&&e.componentOptions;if(n){var r=this.$route,i=this.lastRoute,a="transition"===n.tag?n.children[0]:e;if(a&&a.componentOptions){var o=this.getAliveId(),s=this.get(o),u=s||l,c=u.vm,h=u.route,f=!1,d=i!==r,v=this.isAlikeRoute(r,i),p=d&&!v&&this.getPageComp(r)===this.getPageComp(i);if(d&&(this.lastRoute=r,this.set(o,{route:r})),c){var m=this.getCtorIdByNode(a),g=c._ctorId;g&&g!==m?this.remove(o):this.isAlikeRoute(h,r)?(a.componentInstance=c,!v&&h.fullPath!==r.fullPath&&this.isNestRoute(r)&&(c._nestCacheForceReload=!0)):(this.remove(o),f=!0),c._ctorId=m}p&&(f=!0),f&&this.$routerTab.reloadView(),a.data.keepAlive=!0,a.data.routerAlive=this}}return e||t&&t[0]},methods:{set:function(t,e){var n=this.cache,r=n[t];return r&&(e=Object.assign(r,e)),this.$emit("update",t,e),n[t]=e},get:function(t){return this.cache[t]},remove:function(t){var e=this.cache,n=this.get(t);n&&(n.vm&&n.vm.$destroy(),delete e[t])},removeAll:function(){var t=this.cache;for(var e in t)this.remove(e)}}},U={created:function(){var t=this.$route,e=this.$vnode,n=e&&e.data.routerAlive;if(!n)return!1;this._isRouterPage=!0;var r=n.getAliveId(t),i=n.set(r,{route:t,vm:this});this.$watch("routeTab",function(t,e){i.tab="string"===typeof t?{title:t}:t,n.set(r,i)},{deep:!0,immediate:!0})},activated:function(){if(this._nestCacheForceReload){delete this._nestCacheForceReload;var t=this.$route,e=t.name,n=t.path,r=t.params,i=t.query,a=t.hash;i=Object.assign({},i,{_forceReload:+new Date}),this.$router.replace({name:e,path:n,params:r,query:i,hash:a})}},destroyed:function(){this._isRouterPage&&(this.$vnode.data.routerAlive=null)}},X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"router-tab-iframe-fake"})},Y=[];function K(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function J(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){K(a,r,i,o,s,"next",t)}function s(t){K(a,r,i,o,s,"throw",t)}o(void 0)})}}var Q={name:"Iframe",props:{src:String,title:String,icon:String},data:function(){return{routeTab:null}},mounted:function(){var t=J(s.a.mark(function t(){var e,n,r,i,a;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.src,n=this.title,r=this.icon,i=this.$routerTab,a=i.iframes,this.routeTab={title:n,icon:r},a.includes(e)||a.push(e),i.currentIframe=e,t.next=7,this.$nextTick();case 7:this.$routerTab.iframeMounted(e);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),activated:function(){this.$routerTab.currentIframe=this.src},deactivated:function(){this.$routerTab.currentIframe=null},destroyed:function(){var t=this.src,e=this.$routerTab.iframes,n=e.indexOf(t);n>-1&&e.splice(n,1)}},Z=Q,tt=G(Z,X,Y,!1,null,null,null),et=tt.exports,nt=[{path:"iframe/:src/:title?/:icon?",component:et,props:!0,meta:{aliveId:function(t){return"iframe-".concat(t.params.src)}}}];H.install=function t(e,n){t.installed||(t.installed=!0,e.component(H.name,H),e.component(D.name,D),e.mixin(U))},"undefined"!==typeof window&&window.Vue&&window.Vue.use(H);var rt=H,it=nt;n.d(e,"RouterTabRoutes",function(){return it});e["default"]=rt}})});
//# sourceMappingURL=vue-router-tab.umd.min.js.map